<br>

ì–´ë–¤ ê²½ìš° Dynamo ë‚´ì—ì„œ Revit APIë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì–´í•  ìˆ˜ ìˆëŠ”ë°, pyRevitê³¼ëŠ” ëª‡ ê°€ì§€ ì°¨ì´ì ì´ ìˆë‹¤. ê°„ë‹¨íˆ ì‚´í´ë³´ì.

<br>

### Resources
- [ğŸ”— Dynamo Template](https://primer.dynamobim.org/ko/10_Custom-Nodes/10-6_Python-Templates.html)

<br>

### Revit API in Dynamo

Dynamoì—ì„œ Revit APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ pyRevitì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒê³¼ í¬ê²Œ ë‹¤ë¥´ì§€ ì•Šìœ¼ë‚˜, ëª‡ ê°€ì§€ ì°¨ì´ì ì´ ìˆë‹¤.

<br>

### Modules

Dynamoì—ì„œëŠ” ë‹¹ì—°íˆ pyRevit ëª¨ë“ˆì— ì ‘ê·¼í•  ìˆ˜ ì—†ê³  pyRevit ë‚´ì—ì„œë„ Dynamoì˜ ë…¸ë“œì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ì—†ë‹¤.

<br>

### Get Dynamo Template's

[Dynamoì˜ í…œí”Œë¦¿ ë§í¬]([https://primer.dynamobim.org/ko/10\_Custom-Nodes/10-6\_Python-Templates.html)ë¥¼ ì‚´í´ë³´ê³  ì•Œì•„ì•¼ í•  ì£¼ìš” ì°¨ì´ì ì„ ë¹„êµí•´ ë³´ì.

<br>

### Revit API Libraries

pyRevitì€ Revit API ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ í¬í•¨í•˜ì—¬ ë§ì€ ê²ƒì„ ì²˜ë¦¬í•´ì¤€ë‹¤. í•˜ì§€ë§Œ Dynamoì—ì„œëŠ” ì´ëŸ¬í•œ ì°¸ì¡°ë¥¼ ì§ì ‘ í•´ì•¼ í•œë‹¤.

ì´ë¥¼ ìœ„í•´ ìš°ë¦¬ëŠ” **clr** ëª¨ë“ˆì„ ì‚¬ìš©í•œ ë‹¤ìŒ **RevitAPI**ì™€ **RevitAPIUI** ëª¨ë“ˆì„ ì°¸ì¡°í•  ê²ƒì´ë‹¤.

ğŸ‘‡ Here is an example (Above: Dynamo; Below: pyRevit)
``` python
import clr

clr.AddReference('RevitAPI')
from Autodesk.Revit.DB import *
from Autodesk.Revit.DB.Structure import *

clr.AddReference('RevitAPIUI')
from Autodesk.Revit.UI import *
```

``` python
from Autodesk.Revit.DB import *
from Autodesk.Revit.DB.Structure import *
from Autodesk.Revit.UI import *
```

<br>

### .NET List

**.NET List** ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒë„ ë™ì¼í•˜ë‹¤. ì—¬ì „íˆ System.dllì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ **clr** ëª¨ë“ˆì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

ğŸ‘‡ Here is an example
``` python
import clr

clr.AddReference('System')
from System.Collections.Generic import List # List[ElementId]()
```

<br>

### How to use .NET List?

 **.NET List**ëŠ” **Typed List**(íƒ€ì…ì´ ì§€ì •ëœ ë¦¬ìŠ¤íŠ¸)ì´ê¸° ë•Œë¬¸ì— íŒŒì´ì¬ ë¦¬ìŠ¤íŠ¸ì™€ ë‹¤ë¥´ë‹¤ (íŒŒì´ì¬ ë¦¬ìŠ¤íŠ¸ëŠ” ìë™ìœ¼ë¡œ íƒ€ì…ì„ ì¸ì‹í•œë‹¤). ì´ëŠ” ìš°ë¦¬ê°€ ë¦¬ìŠ¤íŠ¸ ë‚´ë¶€ ìš”ì†Œì˜ **Type**ì„ ì§€ì •í•´ì•¼ í•˜ë©°, ë‹¤ë¥¸ ìœ í˜•ì€ ì¶”ê°€í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. Revit APIì˜ ë§ì€ ë©”ì„œë“œì—ì„œ íƒ€ì…ì´ ì§€ì •ëœ ë¦¬ìŠ¤íŠ¸ê°€ í•„ìš”í•œì§€ë¥¼ ì•Œ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.


ğŸ’¡**ICollection (T)** ì„ ì¸ìˆ˜ë¡œ ë³¼ ìˆ˜ ìˆì§€ë§Œ, ëŒ€ì‹  **List (T)** ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ğŸ’¡You will also see **ICollection (T)** as argument too, and we can use **List (T)** instead.

Here is an example:
``` python
#1ï¸âƒ£ Create Empty List and Add Items
empty_list = List[ElementId]()
empty_list.Add(element_A.Id)
empty_list.Add(element_B.Id)

#2ï¸âƒ£ Convert python list in .NET List
python_list_ids = [element_A.Id, element_B.Id]
List_el_ids = List[ElementId](python_list_ids)
```

<br>

### Common Variables

ì´ê²ƒì´ ì•½ê°„ ë‹¬ë¼ì§€ëŠ” ë¶€ë¶„ì´ë‹¤. Revit API ìŠ¤í¬ë¦½íŠ¸ì—ì„œ **doc**, **uidoc**, **app** ë³€ìˆ˜ë¥¼ ì–»ëŠ” ë°ì—ëŠ” ì„œë¡œ ë‹¤ë¥¸ ì ‘ê·¼ ë°©ì‹ì´ ìˆë‹¤.

ğŸ‘‡ Here is an example (Above: Dynamo, Below: pyRevit)
``` python
import clr

clr.AddReference('RevitServices')
import RevitServices
from RevitServices.Persistence import DocumentManager

doc   = DocumentManager.Instance.CurrentDBDocument
uidoc = DocumentManager.Instance.CurrentUIApplication.ActiveUIDocument
app   = doc.Application
```

``` python
#1ï¸âƒ£ Variables
uidoc = __revit__.ActiveUIDocument
doc   = __revit__.ActiveUIDocument.Document
app   = __revit__.Application

#2ï¸âƒ£ Alternative with pyrevit module
from pyrevit import revit
doc   = revit.doc
uidoc = revit.uidoc
app   = revit.app
```

<br>

### Transactions

Dynamoì—ì„œì˜ íŠ¸ëœì ì…˜ì€ pyRevitê³¼ ë¹„êµí–ˆì„ ë•Œ ë‹¤ë¥´ê²Œ ì²˜ë¦¬ëœë‹¤. pyRevitì—ì„œëŠ” Revit APIì˜ **Transaction** í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤. í•˜ì§€ë§Œ Dynamoì—ì„œëŠ” **TransactionManager**ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

ğŸ’¡ë˜í•œ pyRevitì—ì„œ Transaction í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë‹¤ì–‘í•œ ì˜µì…˜ì´ ìˆë‹¤.

ğŸ‘‡ Here is an example (Above: Dynamo; below: pyRevit)
``` python
import clr

clr.AddReference('RevitServices')
import RevitServices
from RevitServices.Persistence import DocumentManager
from RevitServices.Transactions import TransactionManager

doc = DocumentManager.Instance.CurrentDBDocument

#Do some action in a Transaction
TransactionManager.Instance.EnsureInTransaction(doc)
#changes here
TransactionManager.Instance.TransactionTaskDone()
```

``` python
doc = __revit__.ActiveUIDocument.Document

# Regular Style
t = Transaction(doc, "Change")

t.Start()
#changes here
t.Commit()

# Context Manager Style
with Transaction(doc, 'Change') as t:
	t.Start()
	
	# Changes Here
	t.Commit()
```

<br>

### Use Dynamo as a Learning Resource

ğŸ’¡ ì¶”ê°€ íŒ¨í‚¤ì§€ê°€ íŒŒì´ì¬ìœ¼ë¡œ ì‘ì„±ëœ ê²½ìš°, í•´ë‹¹ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.

Dynamo ì‚¬ìš©ìë¼ë©´, ë§ì€ ë‹¤ì–‘í•œ íŒ¨í‚¤ì§€ì— ìµìˆ™í•  ê²ƒì´ê³ , ì¼ë¶€ ê¸°ëŠ¥ì„ pyRevit ìœ¼ë¡œ ë³µì‚¬í•˜ê³  ì‹¶ì„ ìˆ˜ ìˆë‹¤. íŒŒì´ì¬ìœ¼ë¡œ ì‘ì„±ëœ í›Œë¥­í•œ íŒ¨í‚¤ì§€ë“¤ì´ ë§ì´ ìˆìœ¼ë©°, ê·¸ë“¤ì˜ ì†ŒìŠ¤ ì½”ë“œì— ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

ê´€ì‹¬ ìˆëŠ” ë…¸ë“œë¥¼ ë”ë¸” í´ë¦­í•˜ë©´ **íŒŒì´ì¬ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆê±°ë‚˜** dynamo ë…¸ë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, í•´ë‹¹ ë…¸ë“œê°€ ì—´ë¦¬ê³  ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ì§€ ë³¼ ìˆ˜ ìˆë‹¤. ì¢…ì¢… íŒŒì´ì¬ ë…¸ë“œë¥¼ ë³¼ ìˆ˜ ìˆê³ , ë”ë¸” í´ë¦­í•˜ì—¬ ì½”ë“œë¥¼ ë³µì‚¬í•  ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ ë³€ìˆ˜ì™€ íŠ¸ëœì ì…˜ **==Transaction==** ì„ ì–»ëŠ” ë°©ë²•ì€ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ë„ ìˆë‹¤.


<br>

### What about Revit API classes?

ë‹¤ë¥¸ Revit API í´ë˜ìŠ¤ë“¤ë„ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë™ì¼í•œ namespacesì—ì„œ Revit API classë“¤ì„ ê°€ì ¸ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.